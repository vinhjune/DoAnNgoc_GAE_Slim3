function showspecial(a,b){$(".spbutton").removeClass("active"),$(".special-deal").hide(),$("#spbutton"+a).addClass("active"),$("#special"+a).show(),b&&clearInterval(specialDealsInterval)}function submitVoteAjax(a){var b=$("[name=vote]:checked",a).val();b?$.post("/poll/vote",{vote:b},function(b){$(a).parents(".poll:eq(0)").replaceWith(b)},"html"):alert("Please choose an option before you Vote.")}$(document).ready(function(){$(".toprated_list").hide(),$("#toprated1").show(),$("#toprated2").show(),$("#toprated_head1").addClass("close"),$("#toprated_head2").addClass("close"),counter=1,specialDealsInterval=setInterval(function(){counter=counter%$(".special-deal").length+1,showspecial(counter,!1)},5e3),$(".toprated_head").click(function(){$(this).next(".toprated_list").slideToggle(250),$(this).toggleClass("close")}),$(".toprated_head a").click(function(a){a.stopPropagation();return!0})}),$(function(){function h(){var a=$("#search_keywords")[0].autocompleter;a.setExtraParams({date_from:$("#date_from").val().replace(/ /g,"+"),NumNights:$("#nights").val()}),a.flushCache()}function f(){var a=$("#search_keywords")[0].autocompleter,b=a.findValue();return!1}function e(a){c(a)}function d(a){var b=a[0],c=a[1];c=="CITIES"?b="<b><u>"+translate("CITIES")+"</u></b>":c=="DISTRICTS"?b="<b><u>"+translate("CITYDISTRICTS")+"</u></b>":c=="COUNTRIES"?b="<b><u>"+translate("COUNTRIES")+"</u></b>":c=="PROPERTIES"?b="<b><u>"+translate("PLACESTOSTAY")+"</u></b>":c=="REGIONS"&&(b="<b><u>"+translate("REGIONS")+"</u></b>");return b}function c(a){if(a==undefined||a==null)return!1;var b=!1;a.extra?b=a.extra[0]:b=a.selectValue;if(b){if(b=="CITIES"||b=="DISTRICTS"||b=="COUNTRIES"||b=="PROPERTIES"||b=="REGIONS")$("#search_keywords").val("");else if(b.indexOf("&raquo;")!==-1){var c=b.indexOf('href="'),d=b.lastIndexOf('"');document.location=b.substr(c+6,d-c-6),$("#search_keywords").val("")}else b.indexOf("all hostels")!==-1?($("#search_keywords").val(""),document.location=HwReg.get("hostelsUrl")):(propertyid=parseInt(b),propertyid>0?($("#search_propertyid").attr("value",propertyid),$("#search_from_suggestion").attr("value",1)):($("#search_propertyid").val(""),$("#search_from_suggestion").attr("value",0)));setTimeout(function(){$("#search_keywords").focus()},100)}}$("ul.propertytype input").click(function(){var a="property type "+$(this).val()+" "+($(this).attr("checked")?"checked":"unchecked");_gaq.push(["_trackEvent","home","Property type",a])}),$("#loading").hide().ajaxStart(function(){$("#spinner").remove()}).ajaxStop(function(){$(this).hide()});var a=$("#search_keywords").val();$("#search-home,#search-group,#sb-search,#opsearch-home").submit(function(){var b=$("#search_keywords").val(),c=$("#country").val();if(c==undefined||c==""||c.toLowerCase().indexOf(translate("LC__CHOOSEACOUNTRY"))!=-1)c="";var d=$("#city").val();if(d==undefined||d==""||d.toLowerCase().indexOf(translate("LC__CHOOSEACITY"))!=-1)d="";if(c!==""||d!==""){var e="";c!==""&&(e+=c),d!==""&&(c==""?e=d:e=d+", "+c),e!==""&&$("#searchkeywords").val(e)}var f=parseInt($("#guests").val());if(f>=9){if($("#group-type").val()==""){alert(translate("CHOOSEGROUPTYPE"));return!1}if($("#group_ages input:checked").length==0){alert(translate("CHOOSEAGERANGE"));return!1}}var g=HwReg.get("controller");if(g==""||g=="index"||g=="groups"||g=="bookproperty"){if($("#searchkeywords").val()==""&&(b==""||b.indexOf(translate("ORTYPEACITYORPROPERTYNAME"))!=-1)){$("#search_type_keywords").attr("checked")?$("#searchTooltip").css("margin-top","40px"):$("#searchTooltip").css("margin-top",""),$("#searchTooltip").fadeIn("slow"),$("#selectPropertyType").hide(),$("#enterLocation").fadeIn("slow"),$("#search_keywords").val(a),$(".large").addClass("deactive-l"),$("#search_keywords").parent().attr("class","field extra-large deactive-xl");return!1}if($("#propertytype input:checkbox").not(":checked").length==$("#propertytype input:checkbox").length){$("#searchTooltip").css("margin-top","100px"),$("#searchTooltip").fadeIn("slow"),$("#enterLocation").hide(),$("#selectPropertyType").fadeIn("slow"),$("#propertytype input:checkbox").change(function(){$("#selectPropertyType").fadeOut("slow")});return!1}}}),$("#search_keywords").click(function(){search_keywords=$(this).val(),search_keywords==a?$(this).val(""):search_keywords.length>1&&f(),$("#guests-select-wrap").hide(),$(".large").addClass("deactive-l"),$(this).parent().attr("class","field extra-large"),$("#country").val(""),$("#city").val(""),$("#search_type_keywords").attr("checked","checked"),$("#city").html(b)}),$("#search_keywords").blur(function(){search_keywords=$(this).val(),search_keywords==""&&$(this).val(a)}),$.each(CountryList,function(a,b){$("#country").append($("<option></option>").val(b).html(b))}),$("#country, #city").focus(function(){$("#searchTooltip").fadeOut("slow"),$("#search_keywords").parent().attr("class","field extra-large deactive-xl"),$(".large").removeClass("deactive-l"),$("#search_keywords").val(a),$("#search_type_list").attr("checked","checked")}),$("#search_type_keywords").click(function(){$("#search_keywords").click().focus()}),$("#search_type_list").click(function(){$("#country").focus()});var b=$("#city").html();$("#country").change(function(){if(!!$(this).val()){Cities=CityList[$(this).val()];if($("#city").length>0){$("#city").html(b);var a=!1;$.each(Cities,function(b,c){c.substring(0,2)=="--"?(a=!0,c=c.substring(2,c.length-2),$("#city").append($("<optgroup></optgroup>").attr("label",c))):a?$("#city optgroup:last").append($("<option></option>").val(c).html(c)):$("#city").append($("<option></option>").val(c).html(c))})}else alert("We presently have no properties for the country "+$("#country").text()),$("#country").val(""),$("#city").val("")}}),jQuery().autocomplete&&$("#search_keywords").autocomplete(HwReg.get("currentBaseUrl")+"/index/suggestionslist",{getParamName:"search_keywords",delay:300,minChars:2,enableCaching:0,cacheLength:1,matchSubset:1,matchCase:0,matchContains:1,cacheLength:10,onItemSelect:e,onFindValue:c,formatItem:d,autoFill:!1}),$("#currency").click(function(){$("#currency-select-wrap").toggle()}),$("#currency-select-wrap").click(function(){var a=$("#currency-select-wrap option:selected").text(),b=$("#currency-select-wrap option:selected").val();$("#currency").val(a),$("#currency_code").currency_code,$("#currency-select-wrap").toggle();return!1}),Date.firstDayOfWeek=1,Date.format="dd mmm yyyy",$("#date_from,#date_to").datePicker({clickInput:!0});var g=HwReg.get("maxNightsBookable")?HwReg.get("maxNightsBookable"):31;mindate=new Date,$("#date_from").dpSetStartDate(mindate.asString()),df=Date.fromString($("#date_from").val()),$("#date_to").dpSetStartDate(df.addDays(1).asString()),$("#date_to").dpSetEndDate(df.addDays(g-1).asString()),$("#date_from").bind("dpClosed",function(a,b){var c=b[0];c&&(c=new Date(c),$("#date_to").dpSetStartDate(c.addDays(1).asString()),df=Date.fromString($("#date_from").val()),dt=Date.fromString($("#date_to").val()),df.getTime()>=dt.getTime()||df.asString()==dt.asString()?(dt=df.addDays(1),$("#date_to").val(dt.asString()),$("#date_to").dpSetEndDate(df.addDays(g-1).asString())):(max_dt=df.addDays(g),max_dt.getTime()<=dt.getTime()&&(dt=max_dt,$("#date_to").val(max_dt.asString())),$("#date_to").dpSetEndDate(df.asString())))}),$("#date_from, #nights").change(function(){h()}),$("#date_from, #date_to").length>0&&h(),$("#search_keywords").focus(function(){$("#searchTooltip").fadeOut("slow"),$(".bigfield").removeClass("inactive"),$(".bigdropdownleft").addClass("inactive"),$(".bigdropdownright").addClass("inactive"),$("#noborder1").removeClass("select-noborder"),$("#noborder1").addClass("select-noborder-inactive"),$("#noborder2").removeClass("select-noborder"),$("#noborder2").addClass("select-noborder-inactive")}),$("#country, #city").focus(function(){$(".bigfield").addClass("inactive"),$(".bigdropdownleft").removeClass("inactive"),$(".bigdropdownright").removeClass("inactive"),$("#noborder1").addClass("select-noborder"),$("#noborder1").removeClass("select-noborder-inactive"),$("#noborder2").addClass("select-noborder"),$("#noborder2").removeClass("select-noborder-inactive")}),$("#guests").change(function(){var a=parseInt($("#guests").val());a>=9?($(".splodge").addClass("groups"),$(".container").addClass("groupback"),$(".searchbutton").addClass("searchposition"),HwReg.get("isGroupPage")||$("#group_ages, #group_label1, #group_label2, #group_type, #group_message").show(),$("#search-home").prepend('<input type="hidden" name="groupSearch" value="true" />'),$("#find-hostels-btn").addClass("groupsdatesbutton")):a<9&&($(".splodge").removeClass("groups"),$(".container").removeClass("groupback"),$(".searchbutton").removeClass("searchposition"),$("#group_ages, #group_label1, #group_label2, #group_type, #group_message").hide(),$("#search-home [name=groupSearch]").remove(),$("#find-hostels-btn").removeClass("groupsdatesbutton"))}).change(),$("#country,#city,#search_keywords").keyup(function(a){a.keyCode=="13"&&$("#search-home").submit()}),jQuery('#city option[value=""]').attr("selected","selected"),$("#city").keydown(function(a){if(a.keyCode!="9")return!0;var b=$("#country").val(),c=$("#city").val();if(b!=""||c!=""){a.preventDefault(),$("#date_from").focus(),$("#date_from").click();return!1}})})